{{- /* 
from suggestion at https://nilsnh.no/2018/06/10/hugo-how-to-add-support-for-responsive-images-trough-image-processing-and-page-bundles-3/ 
example use:
{{< bundle-image name="picture.jpg" alt="Description for screen readers." caption="Some caption" >}}

*/ -}}
{{- $caption := .Get "caption" -}}
{{- $altText := .Get "alt" -}}
{{- $class := .Get "class" -}}
{{- with $.Page.Resources.GetMatch (.Get "name") -}}
<figure 
  {{ if $class -}}
  class = "{{$class}}"
  {{- end -}} >
  <a href="{{- .RelPermalink -}}">
    {{- /* image */ -}}
    <img src="{{- .RelPermalink }}" alt="{{- $altText -}}"/>
  </a>
  {{- if $caption -}}
  <figcaption><p>{{- $caption -}}</p></figcaption>
  {{- end -}}
</figure>
{{- else -}}
<!-- could not find figure {{ .Get "name" }} -->  
{{- end -}}
